<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Purchase Bill</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      body {
        font-family: "Inter", sans-serif;
      }

      @media print {
        body {
          -webkit-print-color-adjust: exact;
        }
      }
    </style>
  </head>

  <body class="bg-gray-50">
    <div
      class="max-w-[850px] mx-auto bg-white shadow-md border border-gray-300 rounded-md p-6 text-[11px]"
    >
      <!-- Title -->
      <h1
        class="text-center text-xl font-extrabold tracking-wide text-blue-700 mb-4"
      >
        PURCHASE BILL
      </h1>

      <!-- Header Row -->
      <div
        class="flex justify-between items-start border-b border-gray-300 pb-4"
      >
        <!-- Logo + Firm -->
        <div class="flex gap-3 items-center">
          <img
            src="<%= user.logo %>"
            alt="Logo"
            class="h-14 w-14 object-contain border p-1 rounded-md"
          />
          <div>
            <h2 class="text-[13px] font-bold text-gray-800">
              <%= user.fermName %>
            </h2>
            <p class="text-[10px] text-gray-600">Email: <%= user.email %></p>
          </div>
        </div>

        <!-- Bill Details -->
        <div class="text-[11px] w-40">
          <div class="flex justify-between">
            <span class="font-semibold">Date:</span>
            <span> <%= purchase.buyDate %> </span>
          </div>
          <div class="flex justify-between">
            <span class="font-semibold">Bill No:</span>
            <span> <%= purchase.billNo %> </span>
          </div>
          <div class="flex justify-between">
            <span class="font-semibold">Vendor Bill:</span>
            <span> <%= purchase.vendorBillNo %> </span>
          </div>
        </div>
      </div>

      <!-- Vendor / Buyer Block -->
      <div class="mt-4 grid grid-cols-2 gap-4">
        <!-- Vendor -->
        <div class="border border-blue-600 rounded-md p-2">
          <h3
            class="bg-blue-600 text-white text-center text-[10px] font-bold py-1 tracking-wide rounded-sm"
          >
            PURCHASED FROM (VENDOR)
          </h3>
          <p class="text-[11px] mt-1 font-semibold text-gray-800">
            <%= purchase.vendorName %>
          </p>
          <p class="text-[10px] text-gray-600">
            Vendor Bill No: <%= purchase.vendorBillNo %>
          </p>
        </div>

        <!-- Buyer -->
        <div class="border border-gray-700 rounded-md p-2">
          <h3
            class="bg-gray-800 text-white text-center text-[10px] font-bold py-1 tracking-wide rounded-sm"
          >
            RECEIVED BY
          </h3>
          <p class="text-[11px] mt-1 font-semibold text-blue-700">
            <%= user.fermName %>
          </p>
        </div>
      </div>

      <!-- Table -->
      <div class="mt-4 overflow-x-auto">
        <table
          class="w-full border border-gray-400 text-[10px] border-collapse"
        >
          <thead>
            <tr class="bg-blue-600 text-white text-[10px]">
              <th class="border border-gray-300 p-1 w-10 text-left">S No.</th>
              <th class="border border-gray-300 p-1 text-left">Part Number</th>
              <th class="border border-gray-300 p-1 text-left">Part Name</th>
              <th class="border border-gray-300 p-1 w-12 text-center">Qty</th>
              <th class="border border-gray-300 p-1 text-right w-20">
                Unit Price
              </th>
              <th class="border border-gray-300 p-1 text-right w-24">Amount</th>
            </tr>
          </thead>

          <tbody>
            <% partDetails.forEach((item, index)=> { %>
            <tr class="<%= index % 2 === 0 ? 'bg-gray-100' : 'bg-white' %>">
              <td class="border border-gray-300 p-1"><%= index + 1 %></td>
              <td class="border border-gray-300 p-1">
                <%= item.partInfo.partNumber %>
              </td>
              <td class="border border-gray-300 p-1">
                <%= item.partInfo.partName %>
              </td>
              <td class="border border-gray-300 p-1 text-center">
                <%= item.Qty %>
              </td>
              <td class="border border-gray-300 p-1 text-right">
                ₹ <%= item.unitPrice %>
              </td>
              <td class="border border-gray-300 p-1 text-right">
                ₹ <%= item.totalAmount.toFixed(2) %>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>

      <!-- Total Section -->
      <div class="mt-4 flex justify-end">
        <table class="text-[11px] border-collapse w-60">
          <tr>
            <td class="font-semibold pr-2 text-right">Total Purchase:</td>
            <td
              class="border border-blue-700 px-2 py-1 font-bold text-right text-gray-800"
            >
              ₹ <%= Total.toFixed(2) %>
            </td>
          </tr>
        </table>
      </div>

      <!-- Footer -->
      <div class="mt-6 text-center text-[10px] text-gray-600">
        Inventory updated successfully.
        <br />
        For any queries, contact:
        <span class="font-semibold"> <%= user.email %> </span>
      </div>

      <p class="mt-3 text-center text-[11px] font-semibold text-blue-700">
        Thank You For Trusting <%= user.fermName %>
      </p>
    </div>
  </body>
</html>
