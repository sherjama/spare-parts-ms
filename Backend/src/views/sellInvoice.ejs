<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invoice</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

    body {
      font-family: "Inter", sans-serif;
    }

    @media print {
      body {
        -webkit-print-color-adjust: exact;
      }
    }
  </style>
</head>

<body class="bg-gray-50">

  <div class="max-w-[850px] mx-auto bg-white shadow-md border border-gray-300 rounded-md p-6 text-[11px]">

    <!-- Header -->
    <h1 class="text-center text-xl font-extrabold tracking-wide text-green-700 mb-4">
      INVOICE
    </h1>

    <div class="flex justify-between items-start border-b border-gray-300 pb-4">

      <!-- Logo + Seller Info -->
      <div class="flex gap-3 items-center">
        <img src="<%= user.logo %>" class="h-14 w-14 object-contain border p-1 rounded-md" alt="Logo" />
        <div>
          <h2 class="text-[14px] font-bold text-gray-800">
            <%= user.fermName %>
          </h2>
          <p class="text-[10px] text-gray-600">
            Email: <%= user.email %>
          </p>
        </div>
      </div>

      <!-- Invoice Details -->
      <div class="text-[11px] w-40">
        <div class="flex justify-between">
          <span class="font-semibold">Date:</span>
          <span>
            <%= sell.date %>
          </span>
        </div>
        <div class="flex justify-between">
          <span class="font-semibold">Invoice:</span>
          <span>
            <%= sell.billNo %>
          </span>
        </div>
      </div>
    </div>

    <!-- BILL TO -->
    <div class="mt-4 w-full max-w-[350px] border border-green-700 rounded-md">
      <h3 class="bg-green-700 text-white text-center py-1 text-[10px] font-bold tracking-wide rounded-sm">
        BILL TO
      </h3>

      <div class="px-3 py-2 text-[11px] text-gray-800 leading-tight">
        <p class="font-semibold">
          <%= sell.customerName %>
        </p>
        <% if (sell.address) { %>
          <p class="text-[10px] text-gray-600">
            <%= sell.address %>
          </p>
          <% } %>
            <% if (sell.mobileNumber) { %>
              <p class="text-[10px] text-gray-600">Mob: <%= sell.mobileNumber %>
              </p>
              <% } %>
      </div>
    </div>

    <!-- Items Table -->
    <div class="mt-4 overflow-x-auto">
      <table class="w-full border border-gray-400 text-[10px] border-collapse">
        <thead>
          <tr class="bg-green-700 text-white text-[10px]">
            <th class="border border-gray-300 p-1 w-10 text-left">S No.</th>
            <th class="border border-gray-300 p-1 text-left w-32">Part Number</th>
            <th class="border border-gray-300 p-1 text-left">Description</th>
            <th class="border border-gray-300 p-1 w-12 text-center">Qty</th>
            <th class="border border-gray-300 p-1 w-20 text-right">Unit Price</th>
            <th class="border border-gray-300 p-1 w-24 text-right">Amount</th>
          </tr>
        </thead>

        <tbody>
          <% partDetails.forEach((item, index)=> { %>
            <tr class="<%= index % 2 === 0 ? 'bg-gray-100' : 'bg-white' %>">
              <td class="border border-gray-300 p-1">
                <%= index + 1 %>
              </td>
              <td class="border border-gray-300 p-1">
                <%= item.partInfo.partNumber %>
              </td>
              <td class="border border-gray-300 p-1">
                <%= item.partInfo.partName %>
              </td>
              <td class="border border-gray-300 p-1 text-center">
                <%= item.Qty %>
              </td>
              <td class="border border-gray-300 p-1 text-right">₹ <%= item.unitPrice %>
              </td>
              <td class="border border-gray-300 p-1 text-right">₹ <%= item.totalAmount %>
              </td>
            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>

    <!-- Summary Section -->
    <div class="mt-4 flex justify-end">
      <table class="text-[11px] border-collapse w-60">
        <tr>
          <td class="text-right pr-2">Subtotal:</td>
          <td class="border border-green-700 px-2 py-1 text-right">₹ <%= subTotal.toFixed(2) %>
          </td>
        </tr>
        <tr>
          <td class="text-right pr-2">Discount:</td>
          <td class="border border-green-700 px-2 py-1 text-right">₹ <%= discount.toFixed(2) %>
          </td>
        </tr>
        <tr>
          <td class="text-right pr-2">Other Charges:</td>
          <td class="border border-green-700 px-2 py-1 text-right">₹ <%= otherAmount.toFixed(2) %>
          </td>
        </tr>
        <tr class="font-bold border-t border-green-700">
          <td class="text-right pr-2">TOTAL:</td>
          <td class="border border-green-700 bg-gray-100 px-2 py-1 text-right">
            ₹ <%= Total.toFixed(2) %>
          </td>
        </tr>
      </table>
    </div>

    <!-- Footer -->
    <div class="mt-6 text-center text-[10px] text-gray-700">
      Make all payments to:
      <br />
      <span class="font-bold">
        <%= user.fermName %>
      </span>
    </div>

    <div class="mt-6 text-center text-[9px] text-gray-600">
      If you have any questions about this invoice, contact:
      <br />
      <%= user.email %>
    </div>

    <p class="mt-3 text-center text-[11px] font-semibold text-green-700">
      Thank You For Your Business!
    </p>

  </div>

</body>

</html>